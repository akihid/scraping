## 開発内容

Web 版 Zaim をスクレイピングして、家計簿の入力履歴を表示するコマンドラインツールの開発
使用言語Ruby/Rspec

## 開発にかかった時間

約15時間
- 内訳
  -- ログイン処理（4時間)
  -- スクレイピング処理(５時間)
  -- テスト作成および修正(6時間)


## 工夫した点

### 1.コマンドラインツールだったのでユーザーが情報を入力できるようにした

ユーザーが引数を入力せずに実行した場合にも、メールアドレス・パスワード・指定年月を入力できるようにした。
入力された情報に誤りがあり、ログインに失敗した場合、値を表示し処理を終了する。
指定年月が不正な値だった場合、原因を表示し処理を終了する。

### 2.UserクラスとZaimクラスに分けた

最初はZaimクラスのみに全ての処理を書いていたが、Userクラスでログインおよび履歴情報の取得を行い、Zaimクラスは渡された情報は表示するだけと
責務をわけた。

### ３.コンソールの出力の体裁を整えた

ljustなどを使用し、入力履歴を表示する際には体裁を整え、確認しやすい表示を意識した。


## 動作確認方法の説明
git clone後、bundle install。
```
  git clone git@github.com:akihid/scraping.git
  cd scraping
  bundle install
```

### 引数なしの場合
コマンドラインの表示に従い、以下を入力する

- メールアドレス
- パスワード
- 入力履歴を表示する年月

```
  bundle exec exe/scraping_from_zaim
```

### 引数ありの場合
メールアドレス、パスワード、年月をオプションとして渡す。

- (-m)メールアドレス
- (-p)第二引数にパスワード
- (-y)第三引数に入力履歴を表示する年月

```
  bundle exec exe/scraping_from_zaim -m メールアドレス -p パスワード -y 入力履歴を表示する年月
```
 
実行例
```
bundle exec exe/scraping_from_zaim -p gmgjdpgjt -y 201911
```

## 使用Gem
- "vcr"(テスト時に通信しないため使用)
- "nokogiri"(スクレイピング用)
- "mechanize"(スクレイピング用)
- "thor"(CLI用)